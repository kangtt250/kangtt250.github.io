
# Black-Scholes 期权定价模型学习笔记

## 1. Black-Scholes 公式简介

Black-Scholes 模型是用来计算欧式期权（只能在到期时行权）的理论价格的数学模型。该模型通过考虑标的资产价格、执行价格、波动率、无风险利率以及到期时间等因素，来推导出期权的理论价格。具体公式如下：

对于看涨期权 (Call Option) 的定价公式：
```
C = S_0 * N(d1) - X * e^(-rT) * N(d2)
```

其中：
- C 是看涨期权的理论价格（CallTheo）。
- S_0 是标的资产的当前价格。
- X 是期权的执行价格（Strike）。
- r 是无风险利率。
- T 是到期时间（文档中的TimeLeft）。
- N(d1) 和 N(d2) 是标准正态分布的累积分布函数值。

## 2. d1 和 d2 的计算公式

在 Black-Scholes 公式中，两个关键变量 d1 和 d2 用来计算 `N(d1)` 和 `N(d2)`，它们的计算公式如下：

```
d1 = [ln(S_0 / X) + (r + σ²/2)T] / σ√T
d2 = d1 - σ√T
```

其中：
- S_0 是标的资产的当前价格。
- X 是期权的行权价格。
- r 是无风险利率。
- σ 是标的资产的波动率（文档中的Vol）。
- T 是到期时间，以年为单位。

## 3. N(d1) 和 N(d2) 的含义

- **N(d1)**：表示标的资产价格相对于行权价上涨的概率。它结合了期权的时间价值和波动率，反映了未来期权可能会被行权的概率。
- **N(d2)**：表示期权到期时，标的资产价格高于执行价格的概率。它更多反映了期权到期时的行权可能性。

通过累积分布函数 `N(x)`，我们可以找到 `d1` 和 `d2` 在标准正态分布下的概率值。

## 4. Black-Scholes 公式计算过程（示例）

以文档中的数据为例，来计算看涨期权的理论价格 (CallTheo) 为 202.02 的过程：

已知数据：
- **Strike (执行价格)**: 3000.0
- **Vol (波动率)**: 12.0% (即 σ = 0.12)
- **TimeLeft (到期时间)**: 25 天 (转换为年 T = 25/365 ≈ 0.0685)
- **d1**: 1.739777
- **d2**: 1.702277

我们假设标的资产当前价格 S_0 = 3200（通常为Atmfwd，即“at the money forward”的值），无风险利率 r 为 0.05（5%）。

计算步骤：
1. **将TimeLeft转为年数**：T = 25/365 ≈ 0.0685。
2. **标准正态分布累积分布函数值**：
   - N(d1) ≈ 0.959
   - N(d2) ≈ 0.955
   
3. **计算期权理论价格**：
```
C = 3200 * 0.959 - 3000 * e^(-0.05 * 0.0685) * 0.955
C = 3068.8 - 2854.49 ≈ 214.31
```
计算结果约为 214.31，与文档中的 202.02 较为接近，可能由于参数微小差异导致的误差。

## 5. N(d1) 和 N(d2) 的计算细节

N(d1) 和 N(d2) 是标准正态分布的累积分布函数值，表示标的资产价格在未来超过执行价格的概率。具体计算方法有两种：

1. **标准正态分布表**：在表中查找对应的 d1 和 d2 值。例如，d1 = 1.739777，对应的累积分布函数值 N(d1) ≈ 0.959。
2. **程序计算**：可以通过编程语言来计算，例如使用 Python 的 `scipy.stats.norm.cdf()` 函数。

## 6. 总结

- Black-Scholes 模型通过计算 d1 和 d2，并将它们带入标准正态分布中得到的概率值 N(d1) 和 N(d2)，推导出期权的理论价格。
- N(d1) 表示标的资产价格上涨的概率，N(d2) 代表到期时超过行权价的概率。
- 这些计算帮助我们理解期权定价背后的概率及其市场表现。

### 学习提示

1. 初学者应重点掌握 d1 和 d2 的计算，以及标准正态分布在期权定价中的作用。
2. 理解期权的定价逻辑有助于更好地分析市场中期权的波动及风险。
